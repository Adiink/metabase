name: Reincarnated Accounts
description: |-
  Count of Accounts from the last year where the Canceled Date of one Account is equal to the Creation Date of the other.

  Uses: self join, filter, aggregation, and breakout
entity_id: eLG4PmyYMw1qJ0gzCOLO7
created_at: '2024-09-18T18:01:13.750278Z'
creator_id: admin@metabase.local
display: table
archived: false
collection_id: O-c3c3VRcvHG5i3EfFi9F
collection_preview: true
collection_position: 1
query_type: query
database_id: Sample Database
table_id:
- Sample Database
- PUBLIC
- ACCOUNTS
enable_embedding: false
embedding_params: null
made_public_by_id: null
public_uuid: null
parameters: []
parameter_mappings: []
dataset_query:
  database: Sample Database
  query:
    aggregation:
    - - sum
      - - field
        - - Sample Database
          - PUBLIC
          - ACCOUNTS
          - SEATS
        - base-type: type/Integer
    - - count
    breakout:
    - - field
      - - Sample Database
        - PUBLIC
        - ACCOUNTS
        - CREATED_AT
      - base-type: type/DateTime
        join-alias: Accounts - Canceled At
        temporal-unit: day
    filter:
    - time-interval
    - - field
      - - Sample Database
        - PUBLIC
        - ACCOUNTS
        - CREATED_AT
      - base-type: type/DateTime
        join-alias: Accounts - Canceled At
    - -12
    - month
    - include-current: true
    joins:
    - alias: Accounts - Canceled At
      condition:
      - =
      - - field
        - - Sample Database
          - PUBLIC
          - ACCOUNTS
          - CANCELED_AT
        - base-type: type/DateTime
          temporal-unit: day
      - - field
        - - Sample Database
          - PUBLIC
          - ACCOUNTS
          - CREATED_AT
        - base-type: type/DateTime
          temporal-unit: day
          join-alias: Accounts - Canceled At
      source-table:
      - Sample Database
      - PUBLIC
      - ACCOUNTS
      strategy: left-join
    source-table:
    - Sample Database
    - PUBLIC
    - ACCOUNTS
  type: query
result_metadata:
- base_type: type/Date
  coercion_strategy: null
  description: null
  display_name: Accounts - Canceled At â†’ Created At
  effective_type: type/Date
  field_ref:
  - field
  - - Sample Database
    - PUBLIC
    - ACCOUNTS
    - CREATED_AT
  - base-type: type/DateTime
    join-alias: Accounts - Canceled At
    temporal-unit: day
  fk_target_field_id: null
  id:
  - Sample Database
  - PUBLIC
  - ACCOUNTS
  - CREATED_AT
  name: CREATED_AT
  semantic_type: type/CreationTimestamp
  settings: null
  unit: day
  visibility_type: normal
- base_type: type/BigInteger
  display_name: Sum of Seats
  effective_type: type/BigInteger
  field_ref:
  - aggregation
  - 0
  name: sum
  semantic_type: null
  settings: null
- base_type: type/BigInteger
  display_name: Count
  effective_type: type/BigInteger
  field_ref:
  - aggregation
  - 1
  name: count
  semantic_type: type/Quantity
visualization_settings:
  column_settings: null
  table.cell_column: sum
serdes/meta:
- id: eLG4PmyYMw1qJ0gzCOLO7
  label: reincarnated_accounts
  model: Card
archived_directly: false
metabase_version: v0.1.37-SNAPSHOT (6469402)
source_card_id: null
type: model
